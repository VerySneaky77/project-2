<% include header.ejs %>
<div class="table-wrapper">
    <% if (contactInfo.length > 0) {%>
    <table class="table table-hovered">
        <thead class="thead-dark">
            <tr>
                <th scope="col">ID</th>
                <th scope="col">First Name</th>
                <th scope="col">Last Name</th>
                <th scope="col">Middle Name</th>
                <th scope="col">Profession</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><%= contactInfo.id %></td>
                <td><%= contactInfo.nameFirst %></td>
                <td><%= contactInfo.nameLast %></td>
                <td><%= contactInfo.nameMiddle %></td>
                <td><%= contactInfo.profession %></td>
            </tr>
        </tbody>
    </table>
    <table class="table table-hovered">
        <thead class="thead-dark">
            <tr>
                <th scope="col">Phone Number</th>
                <th scope="col">Street Address</th>
                <th scope="col">City</th>
                <th scope="col">State</th>
                <th scope="col">Zip Code</th>
                <th scope="col">Email Address</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th scope="row"><%= player.id %></th>
                <td><%= contactInfo.emailAddress %></td>
                <td><%= contactInfo.numPhone %></td>
                <td><%= contactInfo.streetAddress %></td>
                <td><%= contactInfo.cityAddress %></td>
                <td><%= contactInfo.stateAddress %></td>
                <td><%= contactInfo.zipCode %></td>
            </tr>
        </tbody>
    </table>
    <div class="picsBox">
        <img src="/assets/img/<%= player.image %>" class="rounded-circle player-img" alt="">
    </div>
</div>
</div>
<script>
    var url = window.location.search;
    var contactId;
    var contactInfo;

    if (url.indexOf("?id=") !== -1) {
        contactId = url.split("=")[1];
        getInfo(contactId);
    }
    // If there's no authorId we just get all posts as usual
    else {
        getInfo();
    }

    getInfo();
    // This function grabs posts from the database and updates the view
    function getInfo(contact) {
        contactId = contact || "";
        if (contactId) {
            contactId = "/?id=" + contactId;
        }
        $.get("/api/view" + authorId, function (data) {
            console.log("Contact", data);
            contactnInfo = data;
        });
    }
</script>
</body>

</html>